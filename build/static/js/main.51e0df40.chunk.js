(this["webpackJsonpanalysis-frontend"]=this["webpackJsonpanalysis-frontend"]||[]).push([[0],{146:function(e,t,n){},238:function(e,t,n){},243:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(24),c=n.n(s),u=(n(146),n(130)),o=n(17),i=n(20),p=n.n(i),l=n(33),j=n(61),h=n(246),f=n(41),d=n.n(f);d.a.defaults.baseURL="".concat("/api","/api/v1"),d.a.defaults.headers.post["Content-Type"]="application/json",d.a.defaults.headers["Content-Type"]="application/json",d.a.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e.response)}));var m={authenticate:function(){var e=Object(l.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.post("/authenticate",JSON.stringify(t));case 3:return n=e.sent,e.next=6,m.setToken(n.data.token);case 6:return e.abrupt("return",n);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),getUser:function(){var e=Object(l.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.setAuthToken();case 2:return e.prev=2,e.next=5,d.a.get("/users");case 5:return t=e.sent,e.abrupt("return",t);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),logOut:function(){var e=Object(l.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.removeToken();case 2:return e.next=4,localStorage.getItem("authToken");case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setAuthToken:function(){var e=Object(l.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getToken();case 2:d.a.defaults.headers.Authorization=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setToken:function(){var e=Object(l.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.setItem("authToken",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getToken:function(){var e=Object(l.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("authToken");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),removeToken:function(){var e=Object(l.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.removeItem("authToken");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},b=m,x=n(6);function O(e){var t=e.history,n=Object(r.useState)(!1),a=Object(j.a)(n,2),s=a[0],c=a[1];return Object(r.useEffect)((function(){Object(l.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,b.getUser();case 3:if(n=e.sent,console.log(n.data),!n||401!==n.status){e.next=9;break}return e.next=8,b.logOut();case 8:t.push("/login");case 9:c(!1);case 10:case"end":return e.stop()}}),e)})))()}),[]),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(h.a,{spinning:s,size:"large",children:Object(x.jsx)("div",{children:"Dashboard"})})})}var g=n(139),v=n(247),k=n(248),w=n(252),y=n(249),T=n(250),I=n(251),N=n(137),S=n(253),F=n(254),P=n.p+"static/media/splash.d2f27d27.png";function C(e){var t=e.history,n=a.a.useState(!1),r=Object(j.a)(n,2),s=r[0],c=r[1],u=a.a.useState(""),o=Object(j.a)(u,2),i=o[0],f=o[1],d=function(){var e=Object(l.a)(p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),delete n.remember,e.next=4,b.authenticate({user:n});case 4:(r=e.sent)&&200===r.status?(console.log(r),g.b.success("Login success"),setTimeout((function(){t.push("dashboard")}),3e3)):f(r.data.message),c(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(h.a,{spinning:s,size:"large",children:Object(x.jsxs)(v.a,{justify:"space-around",align:"middle",children:[Object(x.jsx)(k.a,{xs:0,lg:16,children:Object(x.jsx)("img",{className:"splash",src:P,alt:""})}),Object(x.jsxs)(k.a,{xs:24,lg:8,className:"form",children:[Object(x.jsx)(k.a,{children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{className:"text",children:"Welcome Back!"}),Object(x.jsxs)("h2",{className:"text",children:["Fill in your login credentials to",Object(x.jsx)("span",{children:"pick up where you left off"})]})]})}),i&&Object(x.jsx)(w.a,{className:"mb",message:i,type:"error",showIcon:!0}),Object(x.jsxs)(y.a,{name:"basic",initialValues:{remember:!0},onFinish:d,children:[Object(x.jsx)(y.a.Item,{className:"form-radius",name:"email",rules:[{required:!0,message:"Please input your username!"}],children:Object(x.jsx)(T.a,{prefix:Object(x.jsx)(S.a,{className:"site-form-item-icon login-input"}),placeholder:"Username"})}),Object(x.jsx)(y.a.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(x.jsx)(T.a.Password,{prefix:Object(x.jsx)(F.a,{className:"site-form-item-icon login-input"}),type:"password",placeholder:"Password"})}),Object(x.jsx)(y.a.Item,{name:"remember",valuePropName:"checked",children:Object(x.jsx)(I.a,{children:"Remember me"})}),Object(x.jsx)(y.a.Item,{children:Object(x.jsx)(N.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})]})]})})})}n(238);function L(){return Object(x.jsx)(u.a,{children:Object(x.jsxs)(o.d,{children:[Object(x.jsx)(o.b,{path:"/login",component:C}),Object(x.jsx)(o.b,{path:"/dashboard",component:O}),Object(x.jsx)(o.a,{from:"/",to:"/login"})]})})}var U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,255)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))},z=(n(242),n(132));c.a.render(Object(x.jsx)(z.a,{children:Object(x.jsx)(L,{})}),document.getElementById("root")),U()}},[[243,1,2]]]);
//# sourceMappingURL=main.51e0df40.chunk.js.map